
## 全概率公式 total probability 

回顾概率公式：(From Wiki)

假设{ Bn : n = 1, 2, 3, ... } 是一个概率空间的有限或者可数无限的分割（既 Bn为一完备事件组），且每个集合Bn是一个可测集合，则对任意事件A有全概率公式：

{\displaystyle \Pr(A)=\sum _{n}\Pr(A\cap B_{n})\,} \Pr(A)=\sum _{{n}}\Pr(A\cap B_{n})\,
又因为

{\displaystyle \Pr(A\cap B_{n})=\Pr(A\mid B_{n})\Pr(B_{n}),} \Pr(A\cap B_{n})=\Pr(A\mid B_{n})\Pr(B_{n}),
此处Pr(A | B)是B发生后A的条件概率，所以全概率公式又可写作：

{\displaystyle \Pr(A)=\sum _{n}\Pr(A\mid B_{n})\Pr(B_{n}).\,} \Pr(A)=\sum _{{n}}\Pr(A\mid B_{n})\Pr(B_{n}).\,
全概率公式将对一复杂事件A的概率求解问题转化为了在不同情况或不同原因 Bn下发生的简单事件的概率的求和问题。

（1）加法公式：P(A+B) = P(A) + P(B) - P(AB)

（2）减法公式：P(A-B)  = P(A) - P(AB)

（3）乘法公式：P(AB)   = P(A)*P(B|A)

（4）全概率公式 P(A) = P(B1)*P(A|B1) + P(B2)*P(A|B2) + ........

（5）贝叶斯公式：

全概率公式的应用：

例1：

一批产品共8件，其中正品6件，次品2件．现不放回地从中取产品两次，每次一件，求第二次取得正品的概率．

题解：有两种写法，第一种是用组合公式，算出取的总可能，再算出第一次次品+第二次正品 和  第一次正品和第二次正品的可能性只和，相除即答案；

方法二：就是全概率公式，对于本题，A的概率只有正品和次品之分，故答案为
翻译过来就是：A2为正品的概率就是 A1为正品的概率的*（在A1为正品的前提下A2为正品的概率） + A1为次品的概率*（在A1为次品的概率下A2为正品的概率）

推广：如果是第三个为正品，那么就是A1A2为正品，A1为正品呢A2为次品，A1为次品A2为正品，A1A2为次品的概率的前提下A3为正品的概率

## 条件概率及公式

在离散情况下，上述公式等于下面这个公式。但后者在连续情况下仍然成立：

{\displaystyle \Pr(A)=E(\Pr(A\mid N))} \Pr(A)=E(\Pr(A\mid N))
此处N是任意随机变量。

这个公式还可以表达为：

"A的先验概率等于A的后验概率的先验期望值。

## 贝叶斯定理 Bayes' theorem

