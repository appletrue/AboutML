
# 全概率公式 total probability:

From Wiki & Blogs

### 条件概率公式:

设A,B是两个事件，且P(B)>0,则在事件B发生的条件下，事件A发生的条件概率（conditional probability)为：

P(A|B)=P(AB)/P(B)

----条件概率及公式-------

在离散情况下，上述公式等于下面这个公式。但后者在连续情况下仍然成立：

$Pr(A)=E(Pr(A\mid N))$ (N是任意随机变量)。

这个公式还可以表达为:"A的先验概率等于A的后验概率的先验期望值。

-----

假设{ Bn : n = 1, 2, 3, ... } 是一个概率空间的有限或者可数无限的分割（既 Bn为一完备事件组），且每个集合Bn是一个可测集合，则对任意事件A有全概率公式：

$ Pr(A)=\sum_{n} Pr(A \cap B_{n})$,又因为

$Pr(A\cap B_{n})=Pr(A\mid B_{n})Pr(B_{n})$,此处Pr(A|B)是B发生后A的条件概率，所以**全概率公式**又可写作：

$Pr(A)=sum _{n}Pr(A\mid B_{n})Pr(B_{n})$,

全概率公式将对一复杂事件A的概率求解问题转化为了在不同情况或不同原因 Bn下发生的简单事件的概率的求和问题。

![totalpro](https://github.com/appletrue/NoteML/blob/master/PICs/totalpro.png)

全概率公式可以从另一个角度去理解，把Bn看作是事件A发生的一种“**可能途径**”，若采用了不同的途径，A发生的概率，也就是相应的条件概率P(A|Bn)也会不同。但是，我们事先却并不知道将会走哪条途径，换言之，**途径的选择是随机的**，这样就导致了**不同途径被选中的可能性也许也会存在差异**，这就是P(Bn)所表达的含义。这样一来，我们最终所要求的P(A)，实际上就是一个**不同路径概率的加权平均**。

![totalpro2](https://github.com/appletrue/NoteML/blob/master/PICs/totalpro2.png)

（1）加法公式：P(A+B) = P(A) + P(B) - P(AB)

（2）减法公式：P(A-B) = P(A) - P(AB)

（3）乘法公式：P(AB) = P(A)*P(B|A)

### 乘法公式的推广：

对于任何正整数n≥2，当$P(A_1A_2...A_{n-1}) > 0$ 时，有：

$P(A_1A_2...A_{n-1}A_n)=P(A_1)P(A_2|A_1)P(A_3|A_1A_2)...P(A_n|A_1A_2...A_{n-1})$

（4）全概率公式 $P(A) = P(B_1)*P(A|B_1) + P(B_2)*P(A|B_2) + ........$

### 全概率公式应用：

例：

一批产品共8件，其中正品6件，次品2件．现不放回地从中取产品两次，每次一件，求第二次取得正品的概率．

题解：有两种写法，第一种是用组合公式，算出取的总可能，再算出第一次次品+第二次正品 和  第一次正品和第二次正品的可能性只和，相除即答案；

方法二：就是全概率公式，对于本题，A的概率只有正品和次品之分，故答案为

A2为正品的概率就是 A1为正品的概率的*（在A1为正品的前提下A2为正品的概率） + A1为次品的概率*（在A1为次品的概率下A2为正品的概率）

推广：如果是第三个为正品，那么就是A1A2为正品，A1为正品呢A2为次品，A1为次品A2为正品，A1A2为次品的概率的前提下A3为正品的概率

-------
在全概率公式中，如果将A看成是“结果”，Bi看成是导致结果发生的诸多“原因”之一，那么**全概率公式就是一个“原因推结果”的过程**。

**区别于与此相反的贝叶斯公式**。

贝叶斯公式中，我们是知道结果A已经发生了，所要做的是反过来研究造成结果发生的原因，是XX原因造成的可能性有多大，即“结果推原因”。
